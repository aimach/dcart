import{c as ie,r as g,R as I,G as re,b as oe,a as se,E as ae,e as ue,j as z}from"./index-BxFqVAtU.js";import{m as b,L as Z,u as le,n as he,i as ce}from"./icons-BCZYgyQa.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6",key:"y09zxi"}],["path",{d:"m21 3-9 9",key:"mpx6sq"}],["path",{d:"M15 3h6v6",key:"1q9fwt"}]],et=ie("SquareArrowOutUpRight",fe);function q(r,o){const s=g.useRef(o);g.useEffect(function(){o!==s.current&&r.attributionControl!=null&&(s.current!=null&&r.attributionControl.removeAttribution(s.current),o!=null&&r.attributionControl.addAttribution(o)),s.current=o},[r,o])}const de=1;function _e(r){return Object.freeze({__version:de,map:r})}function E(r,o){return Object.freeze({...r,...o})}const W=g.createContext(null),R=W.Provider;function x(){const r=g.useContext(W);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function j(r){function o(s,u){const{instance:d,context:e}=r(s).current;return g.useImperativeHandle(u,()=>d),s.children==null?null:I.createElement(R,{value:e},s.children)}return g.forwardRef(o)}function pe(r){function o(s,u){const[d,e]=g.useState(!1),{instance:t}=r(s,e).current;g.useImperativeHandle(u,()=>t),g.useEffect(function(){d&&t.update()},[t,d,s.children]);const n=t._contentNode;return n?re.createPortal(s.children,n):null}return g.forwardRef(o)}function $(r){function o(s,u){const{instance:d}=r(s).current;return g.useImperativeHandle(u,()=>d),null}return g.forwardRef(o)}function Q(r){return function(s){const u=x(),d=r(s,u),{instance:e}=d.current,t=g.useRef(s.position),{position:n}=s;return g.useEffect(function(){return e.addTo(u.map),function(){e.remove()}},[u.map,e]),g.useEffect(function(){n!=null&&n!==t.current&&(e.setPosition(n),t.current=n)},[e,n]),d}}function U(r,o){const s=g.useRef();g.useEffect(function(){return o!=null&&r.instance.on(o),s.current=o,function(){s.current!=null&&r.instance.off(s.current),s.current=null}},[r,o])}function B(r,o){const s=r.pane??o.pane;return s?{...r,pane:s}:r}function me(r,o){return function(u,d){const e=x(),t=r(B(u,e),e);return q(e.map,u.attribution),U(t.current,u.eventHandlers),o(t.current,e,u,d),t}}function S(r,o,s){return Object.freeze({instance:r,context:o,container:s})}function O(r,o){return o==null?function(u,d){const e=g.useRef();return e.current||(e.current=r(u,d)),e}:function(u,d){const e=g.useRef();e.current||(e.current=r(u,d));const t=g.useRef(u),{instance:n}=e.current;return g.useEffect(function(){t.current!==u&&(o(n,u,t.current),t.current=u)},[n,u,d]),e}}function X(r,o){g.useEffect(function(){return(o.layerContainer??o.map).addLayer(r.instance),function(){var e;(e=o.layerContainer)==null||e.removeLayer(r.instance),o.map.removeLayer(r.instance)}},[o,r])}function K(r){return function(s){const u=x(),d=r(B(s,u),u);return q(u.map,s.attribution),U(d.current,s.eventHandlers),X(d.current,u),d}}function ge(r,o){const s=g.useRef();g.useEffect(function(){if(o.pathOptions!==s.current){const d=o.pathOptions??{};r.instance.setStyle(d),s.current=d}},[r,o])}function Le(r){return function(s){const u=x(),d=r(B(s,u),u);return U(d.current,s.eventHandlers),X(d.current,u),ge(d.current,s),d}}function Y(r){function o(d,e){return S(r(d),e)}const s=O(o),u=Q(s);return $(u)}function J(r,o){const s=O(r,o),u=K(s);return j(u)}function ye(r,o){const s=O(r),u=me(s,o);return pe(u)}function ve(r,o){const s=O(r,o),u=Le(s);return j(u)}function Ce(r,o){const s=O(r,o),u=K(s);return $(u)}function Me(r,o,s){const{opacity:u,zIndex:d}=o;u!=null&&u!==s.opacity&&r.setOpacity(u),d!=null&&d!==s.zIndex&&r.setZIndex(d)}const tt=J(function({children:o,...s},u){const d=new b.LayerGroup([],s);return S(d,E(u,{layerContainer:d}))}),ke=O(function({children:o,...s},u){const d=new b.Control.Layers(void 0,void 0,s);return S(d,E(u,{layersControl:d}))},function(o,s,u){s.collapsed!==u.collapsed&&(s.collapsed===!0?o.collapse():o.expand())}),be=Q(ke),ee=j(be);function te(r){return function(s){const u=x(),d=g.useRef(s),[e,t]=g.useState(null),{layersControl:n,map:i}=u,a=g.useCallback(f=>{n!=null&&(d.current.checked&&i.addLayer(f),r(n,f,d.current.name),t(f))},[n,i]),h=g.useCallback(f=>{n==null||n.removeLayer(f),t(null)},[n]),l=g.useMemo(()=>E(u,{layerContainer:{addLayer:a,removeLayer:h}}),[u,a,h]);return g.useEffect(()=>{e!==null&&d.current!==s&&(s.checked===!0&&(d.current.checked==null||d.current.checked===!1)?i.addLayer(e):d.current.checked===!0&&(s.checked==null||s.checked===!1)&&i.removeLayer(e),d.current=s)}),s.children?I.createElement(R,{value:l},s.children):null}}ee.BaseLayer=te(function(o,s,u){o.addBaseLayer(s,u)});ee.Overlay=te(function(o,s,u){o.addOverlay(s,u)});function T(){return T=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u])}return r},T.apply(this,arguments)}function Se({bounds:r,boundsOptions:o,center:s,children:u,className:d,id:e,placeholder:t,style:n,whenReady:i,zoom:a,...h},l){const[f]=g.useState({className:d,id:e,style:n}),[c,_]=g.useState(null);g.useImperativeHandle(l,()=>(c==null?void 0:c.map)??null,[c]);const p=g.useCallback(m=>{if(m!==null&&c===null){const v=new b.Map(m,h);s!=null&&a!=null?v.setView(s,a):r!=null&&v.fitBounds(r,o),i!=null&&v.whenReady(i),_(_e(v))}},[]);g.useEffect(()=>()=>{c==null||c.map.remove()},[c]);const y=c?I.createElement(R,{value:c},u):t??null;return I.createElement("div",T({},f,{ref:p}),y)}const nt=g.forwardRef(Se),Oe=J(function({position:o,...s},u){const d=new b.Marker(o,s);return S(d,E(u,{overlayContainer:d}))},function(o,s,u){s.position!==u.position&&o.setLatLng(s.position),s.icon!=null&&s.icon!==u.icon&&o.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==u.zIndexOffset&&o.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==u.opacity&&o.setOpacity(s.opacity),o.dragging!=null&&s.draggable!==u.draggable&&(s.draggable===!0?o.dragging.enable():o.dragging.disable())}),it=Y(function(o){return new b.Control.Scale(o)}),rt=Ce(function({url:o,...s},u){const d=new b.TileLayer(o,B(s,u));return S(d,u)},function(o,s,u){Me(o,s,u);const{url:d}=s;d!=null&&d!==u.url&&o.setUrl(d)}),Pe=ye(function(o,s){const u=new b.Tooltip(o,s.overlayContainer);return S(u,s)},function(o,s,{position:u},d){g.useEffect(function(){const t=s.overlayContainer;if(t==null)return;const{instance:n}=o,i=h=>{h.tooltip===n&&(u!=null&&n.setLatLng(u),n.update(),d(!0))},a=h=>{h.tooltip===n&&d(!1)};return t.on({tooltipopen:i,tooltipclose:a}),t.bindTooltip(n),function(){t.off({tooltipopen:i,tooltipclose:a}),t._map!=null&&t.unbindTooltip()}},[o,s,d,u])}),ot=Y(function(o){return new b.Control.Zoom(o)}),C=[];for(let r=0;r<256;++r)C.push((r+256).toString(16).slice(1));function we(r,o=0){return(C[r[o+0]]+C[r[o+1]]+C[r[o+2]]+C[r[o+3]]+"-"+C[r[o+4]]+C[r[o+5]]+"-"+C[r[o+6]]+C[r[o+7]]+"-"+C[r[o+8]]+C[r[o+9]]+"-"+C[r[o+10]]+C[r[o+11]]+C[r[o+12]]+C[r[o+13]]+C[r[o+14]]+C[r[o+15]]).toLowerCase()}let G;const xe=new Uint8Array(16);function Ie(){if(!G){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");G=crypto.getRandomValues.bind(crypto)}return G(xe)}const Ee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),A={randomUUID:Ee};function st(r,o,s){var d;if(A.randomUUID&&!r)return A.randomUUID();r=r||{};const u=r.random??((d=r.rng)==null?void 0:d.call(r))??Ie();if(u.length<16)throw new Error("Random bytes length must be >= 16");return u[6]=u[6]&15|64,u[8]=u[8]&63|128,we(u)}const Be=oe(r=>({selectedTabMenu:"results",setSelectedTabMenu:o=>r(()=>({selectedTabMenu:o})),mapFilters:[],setMapFilters:o=>r(()=>({mapFilters:o})),resetFilters:()=>r(()=>({mapFilters:[]})),isPanelDisplayed:!1,setIsPanelDisplayed:o=>r(()=>({isPanelDisplayed:o}))}));var N={exports:{}};(function(r,o){(function(s,u){u(o)})(se,function(s){var u=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n=this._featureGroup,i=this._nonPointGroup,a=this.options.chunkedLoading,h=this.options.chunkInterval,l=this.options.chunkProgress,f=e.length,c=0,_=!0,p;if(this._map){var y=new Date().getTime(),m=L.bind(function(){var M=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();c<f;c++){if(a&&c%200===0){var P=new Date().getTime()-M;if(P>h)break}if(p=e[c],p instanceof L.LayerGroup){_&&(e=e.slice(),_=!1),this._extractNonGroupLayers(p,e),f=e.length;continue}if(!p.getLatLng){i.addLayer(p),t||this.fire("layeradd",{layer:p});continue}if(!this.hasLayer(p)&&(this._addLayer(p,this._maxZoom),t||this.fire("layeradd",{layer:p}),p.__parent&&p.__parent.getChildCount()===2)){var k=p.__parent.getAllChildMarkers(),ne=k[0]===p?k[1]:k[0];n.removeLayer(ne)}}l&&l(c,f,new Date().getTime()-y),c===f?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var v=this._needsClustering;c<f;c++){if(p=e[c],p instanceof L.LayerGroup){_&&(e=e.slice(),_=!1),this._extractNonGroupLayers(p,e),f=e.length;continue}if(!p.getLatLng){i.addLayer(p);continue}this.hasLayer(p)||v.push(p)}return this},removeLayers:function(e){var t,n,i=e.length,a=this._featureGroup,h=this._nonPointGroup,l=!0;if(!this._map){for(t=0;t<i;t++){if(n=e[t],n instanceof L.LayerGroup){l&&(e=e.slice(),l=!1),this._extractNonGroupLayers(n,e),i=e.length;continue}this._arraySplice(this._needsClustering,n),h.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n})}return this}if(this._unspiderfy){this._unspiderfy();var f=e.slice(),c=i;for(t=0;t<c;t++){if(n=f[t],n instanceof L.LayerGroup){this._extractNonGroupLayers(n,f),c=f.length;continue}this._unspiderfyLayer(n)}}for(t=0;t<i;t++){if(n=e[t],n instanceof L.LayerGroup){l&&(e=e.slice(),l=!1),this._extractNonGroupLayers(n,e),i=e.length;continue}if(!n.__parent){h.removeLayer(n),this.fire("layerremove",{layer:n});continue}this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),a.hasLayer(n)&&(a.removeLayer(n),n.clusterShow&&n.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n=this._needsClustering.slice(),i=this._needsRemoving,a,h,l;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),h=n.length-1;h>=0;h--){for(a=!0,l=i.length-1;l>=0;l--)if(i[l].layer===n[h]){a=!1;break}a&&e.call(t,n[h])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(n){L.stamp(n)===e&&(t=n)}),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;t>=0;t--)if(n[t]===e)return!0;for(n=this._needsRemoving,t=n.length-1;t>=0;t--)if(n[t].layer===e)return!1;return!!(e.__parent&&e.__parent._group===this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;typeof t!="function"&&(t=function(){});var i=function(){(n.hasLayer(e)||n.hasLayer(e.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",i,this),this.off("animationend",i,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),e.__parent.zoomToBounds())},onAdd:function(e){this._map=e;var t,n,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],i.newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());t>=a&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var i=this._gridClusters,a=this._gridUnclustered,h=this._featureGroup,l=this._map,f=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var c=e.__parent,_=c._markers,p;for(this._arraySplice(_,e);c&&(c._childCount--,c._boundsNeedUpdate=!0,!(c._zoom<f));)t&&c._childCount<=1?(p=c._markers[0]===e?c._markers[1]:c._markers[0],i[c._zoom].removeObject(c,l.project(c._cLatLng,c._zoom)),a[c._zoom].addObject(p,l.project(p.getLatLng(),c._zoom)),this._arraySplice(c.__parent._childClusters,c),c.__parent._markers.push(p),p.__parent=c.__parent,c._icon&&(h.removeLayer(c),n||h.addLayer(p))):c._iconNeedsUpdate=!0,c=c.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return t<10?n+="small":t<100?n+="medium":n+="large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,a=this.options.spiderfyOnEveryZoom;(t||i||a)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if(!(e.type==="clusterkeypress"&&e.originalEvent&&e.originalEvent.keyCode!==13)){for(;n._childClusters.length===1;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&e.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this.options.spiderfyOnEveryZoom,a=this._map;(e||n||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),a.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,i=n;typeof n!="function"&&(i=function(){return n}),this.options.disableClusteringAtZoom!==null&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var a=e;a>=t;a--)this._gridClusters[a]=new L.DistanceGrid(i(a)),this._gridUnclustered[a]=new L.DistanceGrid(i(a));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n=this._gridClusters,i=this._gridUnclustered,a=Math.floor(this._map.getMinZoom()),h,l;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=a;t--){h=this._map.project(e.getLatLng(),t);var f=n[t].getNearObject(h);if(f){f._addChild(e),e.__parent=f;return}if(f=i[t].getNearObject(h),f){var c=f.__parent;c&&this._removeLayer(f,!1);var _=new this._markerCluster(this,t,f,e);n[t].addObject(_,this._map.project(_._cLatLng,t)),f.__parent=_,e.__parent=_;var p=_;for(l=t-1;l>c._zoom;l--)p=new this._markerCluster(this,l,p),n[l].addObject(p,this._map.project(f.getLatLng(),l));c._addChild(p),this._removeFromGridUnclustered(f,t);return}i[t].addObject(e,h)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==void 0&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(t._childCount===2){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n=e.getLayers(),i=0,a;for(t=t||[];i<n.length;i++){if(a=n[i],a instanceof L.LayerGroup){this._extractNonGroupLayers(a,t);continue}t.push(a)}return t},_overrideMarkerIcon:function(e){var t=e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}});return t}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n=this._getExpandedVisibleBounds(),i=this._featureGroup,a=Math.floor(this._map.getMinZoom()),h;this._ignoreMove=!0,this._topClusterLevel._recursively(n,e,a,function(l){var f=l._latlng,c=l._markers,_;for(n.contains(f)||(f=null),l._isSingleParent()&&e+1===t?(i.removeLayer(l),l._recursivelyAddChildrenToMap(null,t,n)):(l.clusterHide(),l._recursivelyAddChildrenToMap(f,t,n)),h=c.length-1;h>=0;h--)_=c[h],n.contains(_._latlng)||i.removeLayer(_)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,t),i.eachLayer(function(l){!(l instanceof L.MarkerCluster)&&l._icon&&l.clusterShow()}),this._topClusterLevel._recursively(n,e,t,function(l){l._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(n,e,a,function(l){i.removeLayer(l),l.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds(),a=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,a,t+1,n);var h=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(e._childCount===1){var l=e._markers[0];this._ignoreMove=!0,l.setLatLng(l.getLatLng()),this._ignoreMove=!1,l.clusterShow&&l.clusterShow()}else e._recursively(i,n,a,function(f){f._recursivelyRemoveChildrenFromMap(i,a,t+1)});h._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var d=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var i=this._markers.length-1;i>=0;i--)t&&this._markers[i].__dragStart||e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t=this._childClusters.slice(),n=this._group._map,i=n.getBoundsZoom(this._bounds),a=this._zoom+1,h=n.getZoom(),l;t.length>0&&i>a;){a++;var f=[];for(l=0;l<t.length;l++)f=f.concat(t[l]._childClusters);t=f}i>a?this._group._map.setView(this._latlng,a):i<=h?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e=this._markers,t=this._childClusters,n=0,i=0,a=this._childCount,h,l,f,c;if(a!==0){for(this._resetBounds(),h=0;h<e.length;h++)f=e[h]._latlng,this._bounds.extend(f),n+=f.lat,i+=f.lng;for(h=0;h<t.length;h++)l=t[h],l._boundsNeedUpdate&&l._recalculateBounds(),this._bounds.extend(l._bounds),f=l._wLatLng,c=l._childCount,n+=f.lat*c,i+=f.lng*c;this._latlng=this._wLatLng=new L.LatLng(n/a,i/a),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,function(i){var a=i._markers,h,l;for(h=a.length-1;h>=0;h--)l=a[h],l._icon&&(l._setPos(t),l.clusterHide())},function(i){var a=i._childClusters,h,l;for(h=a.length-1;h>=0;h--)l=a[h],l._icon&&(l._setPos(t),l.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,i){this._recursively(e,i,t,function(a){a._recursivelyAnimateChildrenIn(e,a._group._map.latLngToLayerPoint(a.getLatLng()).round(),n),a._isSingleParent()&&n-1===i?(a.clusterShow(),a._recursivelyRemoveChildrenFromMap(e,t,n)):a.clusterHide(),a._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,function(i){if(t!==i._zoom)for(var a=i._markers.length-1;a>=0;a--){var h=i._markers[a];n.contains(h._latlng)&&(e&&(h._backupLatlng=h.getLatLng(),h.setLatLng(e),h.clusterHide&&h.clusterHide()),i._group._featureGroup.addLayer(h))}},function(i){i._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,i){var a,h;this._recursively(e,t-1,n-1,function(l){for(h=l._markers.length-1;h>=0;h--)a=l._markers[h],(!i||!i.contains(a._latlng))&&(l._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())},function(l){for(h=l._childClusters.length-1;h>=0;h--)a=l._childClusters[h],(!i||!i.contains(a._latlng))&&(l._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())})},_recursively:function(e,t,n,i,a){var h=this._childClusters,l=this._zoom,f,c;if(t<=l&&(i&&i(this),a&&l===n&&a(this)),l<t||l<n)for(f=h.length-1;f>=0;f--)c=h[f],c._boundsNeedUpdate&&c._recalculateBounds(),e.intersects(c._bounds)&&c._recursively(e,t,n,i,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,h=a[i]=a[i]||{},l=h[n]=h[n]||[],f=L.Util.stamp(e);this._objectPoint[f]=t,l.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,h=a[i]=a[i]||{},l=h[n]=h[n]||[],f,c;for(delete this._objectPoint[L.Util.stamp(e)],f=0,c=l.length;f<c;f++)if(l[f]===e)return l.splice(f,1),c===1&&delete h[n],!0},eachObject:function(e,t){var n,i,a,h,l,f,c,_=this._grid;for(n in _){l=_[n];for(i in l)for(f=l[i],a=0,h=f.length;a<h;a++)c=e.call(t,f[a]),c&&(a--,h--)}},getNearObject:function(e){var t=this._getCoord(e.x),n=this._getCoord(e.y),i,a,h,l,f,c,_,p,y=this._objectPoint,m=this._sqCellSize,v=null;for(i=n-1;i<=n+1;i++)if(l=this._grid[i],l){for(a=t-1;a<=t+1;a++)if(f=l[a],f)for(h=0,c=f.length;h<c;h++)_=f[h],p=this._sqDist(y[L.Util.stamp(_)],e),(p<m||p<=m&&v===null)&&(m=p,v=_)}return v},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},function(){L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat,i=t[0].lng-t[1].lng;return i*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n=0,i=null,a=[],h,l,f;for(h=t.length-1;h>=0;h--){if(l=t[h],f=this.getDistant(l,e),f>0)a.push(l);else continue;f>n&&(n=f,i=l)}return{maxPoint:i,newPoints:a}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints)),n=n.concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)),n):[e[0]]},getConvexHull:function(e){var t=!1,n=!1,i=!1,a=!1,h=null,l=null,f=null,c=null,_=null,p=null,y;for(y=e.length-1;y>=0;y--){var m=e[y];(t===!1||m.lat>t)&&(h=m,t=m.lat),(n===!1||m.lat<n)&&(l=m,n=m.lat),(i===!1||m.lng>i)&&(f=m,i=m.lng),(a===!1||m.lng<a)&&(c=m,a=m.lng)}n!==t?(p=l,_=h):(p=c,_=f);var v=[].concat(this.buildConvexHull([p,_],e),this.buildConvexHull([_,p],e));return v}}}(),L.MarkerCluster.include({getConvexHull:function(){var e=this.getAllChildMarkers(),t=[],n,i;for(i=e.length-1;i>=0;i--)n=e[i].getLatLng(),t.push(n);return L.QuickHull.getConvexHull(t)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var e=this.getAllChildMarkers(null,!0),t=this._group,n=t._map,i=n.latLngToLayerPoint(this._latlng),a;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?a=this._group.options.spiderfyShapePositions(e.length,i):e.length>=this._circleSpiralSwitchover?a=this._generatePointsSpiral(e.length,i):(i.y+=10,a=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,a)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),i=n/this._2PI,a=this._2PI/e,h=[],l,f;for(i=Math.max(i,35),h.length=e,l=0;l<e;l++)f=this._circleStartAngle+l*a,h[l]=new L.Point(t.x+i*Math.cos(f),t.y+i*Math.sin(f))._round();return h},_generatePointsSpiral:function(e,t){var n=this._group.options.spiderfyDistanceMultiplier,i=n*this._spiralLengthStart,a=n*this._spiralFootSeparation,h=n*this._spiralLengthFactor*this._2PI,l=0,f=[],c;for(f.length=e,c=e;c>=0;c--)c<e&&(f[c]=new L.Point(t.x+i*Math.cos(l),t.y+i*Math.sin(l))._round()),l+=a/i+c*5e-4,i+=h/l;return f},_noanimationUnspiderfy:function(){var e=this._group,t=e._map,n=e._featureGroup,i=this.getAllChildMarkers(null,!0),a,h;for(e._ignoreMove=!0,this.setOpacity(1),h=i.length-1;h>=0;h--)a=i[h],n.removeLayer(a),a._preSpiderfyLatlng&&(a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng),a.setZIndexOffset&&a.setZIndexOffset(0),a._spiderLeg&&(t.removeLayer(a._spiderLeg),delete a._spiderLeg);e.fire("unspiderfied",{cluster:this,markers:i}),e._ignoreMove=!1,e._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n=this._group,i=n._map,a=n._featureGroup,h=this._group.options.spiderLegPolylineOptions,l,f,c,_;for(n._ignoreMove=!0,l=0;l<e.length;l++)_=i.layerPointToLatLng(t[l]),f=e[l],c=new L.Polyline([this._latlng,_],h),i.addLayer(c),f._spiderLeg=c,f._preSpiderfyLatlng=f._latlng,f.setLatLng(_),f.setZIndexOffset&&f.setZIndexOffset(1e6),a.addLayer(f);this.setOpacity(.3),n._ignoreMove=!1,n.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n=this,i=this._group,a=i._map,h=i._featureGroup,l=this._latlng,f=a.latLngToLayerPoint(l),c=L.Path.SVG,_=L.extend({},this._group.options.spiderLegPolylineOptions),p=_.opacity,y,m,v,M,P,k;for(p===void 0&&(p=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),c?(_.opacity=0,_.className=(_.className||"")+" leaflet-cluster-spider-leg"):_.opacity=p,i._ignoreMove=!0,y=0;y<e.length;y++)m=e[y],k=a.layerPointToLatLng(t[y]),v=new L.Polyline([l,k],_),a.addLayer(v),m._spiderLeg=v,c&&(M=v._path,P=M.getTotalLength()+.1,M.style.strokeDasharray=P,M.style.strokeDashoffset=P),m.setZIndexOffset&&m.setZIndexOffset(1e6),m.clusterHide&&m.clusterHide(),h.addLayer(m),m._setPos&&m._setPos(f);for(i._forceLayout(),i._animationStart(),y=e.length-1;y>=0;y--)k=a.layerPointToLatLng(t[y]),m=e[y],m._preSpiderfyLatlng=m._latlng,m.setLatLng(k),m.clusterShow&&m.clusterShow(),c&&(v=m._spiderLeg,M=v._path,M.style.strokeDashoffset=0,v.setStyle({opacity:p}));this.setOpacity(.3),i._ignoreMove=!1,setTimeout(function(){i._animationEnd(),i.fire("spiderfied",{cluster:n,markers:e})},200)},_animationUnspiderfy:function(e){var t=this,n=this._group,i=n._map,a=n._featureGroup,h=e?i._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):i.latLngToLayerPoint(this._latlng),l=this.getAllChildMarkers(null,!0),f=L.Path.SVG,c,_,p,y,m,v;for(n._ignoreMove=!0,n._animationStart(),this.setOpacity(1),_=l.length-1;_>=0;_--)c=l[_],c._preSpiderfyLatlng&&(c.closePopup(),c.setLatLng(c._preSpiderfyLatlng),delete c._preSpiderfyLatlng,v=!0,c._setPos&&(c._setPos(h),v=!1),c.clusterHide&&(c.clusterHide(),v=!1),v&&a.removeLayer(c),f&&(p=c._spiderLeg,y=p._path,m=y.getTotalLength()+.1,y.style.strokeDashoffset=m,p.setStyle({opacity:0})));n._ignoreMove=!1,setTimeout(function(){var M=0;for(_=l.length-1;_>=0;_--)c=l[_],c._spiderLeg&&M++;for(_=l.length-1;_>=0;_--)c=l[_],c._spiderLeg&&(c.clusterShow&&c.clusterShow(),c.setZIndexOffset&&c.setZIndexOffset(0),M>1&&a.removeLayer(c),i.removeLayer(c._spiderLeg),delete c._spiderLeg);n._animationEnd(),n.fire("unspiderfied",{cluster:t,markers:l})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=u,s.MarkerCluster=d,Object.defineProperty(s,"__esModule",{value:!0})})})(N,N.exports);function w(r){"@babel/helpers - typeof";return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},w(r)}var Ge=["children"];function H(r,o){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),s.push.apply(s,u)}return s}function D(r){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?H(Object(s),!0).forEach(function(u){Te(r,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(s,u))})}return r}function Te(r,o,s){return(o=Ze(o))in r?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,r}function Ze(r){var o=Re(r,"string");return w(o)=="symbol"?o:o+""}function Re(r,o){if(w(r)!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var u=s.call(r,o);if(w(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}function F(r,o){return Ae(r)||ze(r,o)||Ue(r,o)||je()}function je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(r,o){if(r){if(typeof r=="string")return V(r,o);var s={}.toString.call(r).slice(8,-1);return s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set"?Array.from(r):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?V(r,o):void 0}}function V(r,o){(o==null||o>r.length)&&(o=r.length);for(var s=0,u=Array(o);s<o;s++)u[s]=r[s];return u}function ze(r,o){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var u,d,e,t,n=[],i=!0,a=!1;try{if(e=(s=s.call(r)).next,o!==0)for(;!(i=(u=e.call(s)).done)&&(n.push(u.value),n.length!==o);i=!0);}catch(h){a=!0,d=h}finally{try{if(!i&&s.return!=null&&(t=s.return(),Object(t)!==t))return}finally{if(a)throw d}}return n}}function Ae(r){if(Array.isArray(r))return r}function Ne(r,o){if(r==null)return{};var s,u,d=He(r,o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);for(u=0;u<e.length;u++)s=e[u],o.includes(s)||{}.propertyIsEnumerable.call(r,s)&&(d[s]=r[s])}return d}function He(r,o){if(r==null)return{};var s={};for(var u in r)if({}.hasOwnProperty.call(r,u)){if(o.includes(u))continue;s[u]=r[u]}return s}Z.MarkerClusterGroup.include({_flushLayerBuffer:function(){this.addLayers(this._layerBuffer),this._layerBuffer=[]},addLayer:function(o){this._layerBuffer.length===0&&setTimeout(this._flushLayerBuffer.bind(this),50),this._layerBuffer.push(o)}});Z.MarkerClusterGroup.addInitHook(function(){this._layerBuffer=[]});function De(r,o){r.children;var s=Ne(r,Ge),u={},d={};Object.entries(s).forEach(function(t){var n=F(t,2),i=n[0],a=n[1];return i.startsWith("on")?d[i]=a:u[i]=a});var e=new Z.MarkerClusterGroup(u);return Object.entries(d).forEach(function(t){var n=F(t,2),i=n[0],a=n[1],h="cluster".concat(i.substring(2).toLowerCase());e.on(h,a)}),{instance:e,context:D(D({},o),{},{layerContainer:e})}}var at=ve(De);const Fe="_circleBrownIcon_1lyzw_1",Ve="_lightBackgroundColor_1lyzw_15",qe="_mediumBackgroundColor_1lyzw_19",We="_darkBackgroundColor_1lyzw_23",$e="_selectedBackgroundColor_1lyzw_27",Qe="_invisibleIcon_1lyzw_36",Xe="_iconDivContent_1lyzw_40",Ke={circleBrownIcon:Fe,lightBackgroundColor:Ve,mediumBackgroundColor:qe,darkBackgroundColor:We,selectedBackgroundColor:$e,invisibleIcon:Qe,iconDivContent:Xe},ut=({point:r})=>{const o=ae(),s=o.pathname.split("/")[1]==="map"||o.pathname.split("/")[2]==="maps"?"map":"storymap",{selectedMarker:u,setSelectedMarker:d,mapInfos:e,hasGrayScale:t,panelRef:n}=ue(le(_=>_)),{setSelectedTabMenu:i,setIsPanelDisplayed:a}=Be(),h=[r.latitude,r.longitude],l=`${r.latitude}-${r.longitude}`,f=_=>{s==="map"&&(i("infos"),a(!0),d(_),setTimeout(()=>{var p;(p=n==null?void 0:n.current)==null||p.focus()},0))},c=he(r,Ke,u?ce(u,r):!1,e?e.isNbDisplayed:!0,t);return z.jsx(Oe,{position:h,icon:c,colorAndShape:{color:r.color,shape:r.shape},hasGrayScale:t,eventHandlers:{click:()=>f(r),keydown:_=>{(_.originalEvent.key==="Enter"||_.originalEvent.key===" ")&&f(r)}},children:z.jsx(Pe,{direction:"top",offset:[0,-10],children:t?`${r.sources.length} sources - ${r.nom_ville}`:r.nom_ville})},l)};export{ee as L,at as M,it as S,rt as T,ot as Z,ut as a,tt as b,nt as c,et as d,ye as e,S as f,Oe as g,Be as u,st as v};
