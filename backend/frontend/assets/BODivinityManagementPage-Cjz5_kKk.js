import{r as n,H as h,u as C,J as j,P as L,j as t,B as b,L as R,v as S,a1 as E}from"./index-BxFqVAtU.js";import{u as w}from"./index.esm-DU5Jd49H.js";import{L as I}from"./LabelComponent-Dc0vkv4j.js";import{E as N}from"./ErrorComponent-DHhBf5Ed.js";import{h as D}from"./putRequests-B23pqD-4.js";import{C as F}from"./circle-help-Bu1jh18z.js";const H=`
SELECT 
   STRING_AGG(id::text, ',' ORDER BY id) AS ids
FROM element
WHERE type = 'theonym'`,k="_divinityManagementSection_nrldf_1",T="_divinityManagementHeader_nrldf_13",q="_copiedMessage_nrldf_52",A="_divinityManagementContainer_nrldf_57",O="_divinityManagementForm_nrldf_73",B="_divinityManagementRow_nrldf_83",G="_tagInputContainer_nrldf_91",i={divinityManagementSection:k,divinityManagementHeader:T,copiedMessage:q,divinityManagementContainer:A,divinityManagementForm:O,divinityManagementRow:B,tagInputContainer:G},z=()=>{const{isAdmin:r}=n.useContext(h),{translation:s,language:a}=C(),c=j(),{reload:l,setReload:u}=L();n.useEffect(()=>{r||c("/backoffice")},[r,c]);const[p,f]=n.useState("");n.useEffect(()=>{(async()=>{const d=await S();f(d),y("divinity_list",d)})()},[]);const{register:x,handleSubmit:m,setValue:y,formState:{errors:o}}=w(),v=async e=>{await D(e)===201&&(E("Liste des divinités",!0),u(!l),y("divinity_list",e.divinity_list))},[M,g]=n.useState(!1),_=async()=>{try{await navigator.clipboard.writeText(H),g(!0),setTimeout(()=>g(!1),3e3)}catch(e){console.error(e)}};return p!==""?t.jsxs("section",{className:i.divinityManagementSection,children:[t.jsxs("div",{className:i.divinityManagementHeader,children:[t.jsxs("div",{children:[t.jsx(F,{}),t.jsx("p",{children:s[a].backoffice.divinityManagement.explanation})]}),t.jsx("button",{type:"button",onClick:_,children:s[a].button.copyRequest}),M&&t.jsx("p",{className:i.copiedMessage,children:s[a].alert.copied})]}),t.jsx("div",{className:i.divinityManagementContainer,children:t.jsx("form",{onSubmit:m(v),children:t.jsxs("div",{className:i.divinityManagementForm,children:[t.jsx("div",{className:i.divinityManagementRow,children:t.jsxs("div",{className:i.tagInputContainer,style:{width:"100%"},children:[t.jsx(I,{htmlFor:"divinity_list",label:"Liste des identifiants des divinités",description:""}),t.jsx("textarea",{id:"divinity_list",...x("divinity_list",{required:"La liste des identifiants des divinités est requise"})})]})}),t.jsx(b,{type:"button",color:"brown",textContent:s[a].button.edit,onClickFunction:m(v)}),Object.keys(o).length>0&&t.jsx(N,{message:o[Object.keys(o)[0]].message})]})},l.toString())})]}):t.jsx(R,{})};export{z as default};
